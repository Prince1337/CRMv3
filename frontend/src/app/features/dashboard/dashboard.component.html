<div class="dashboard-container">
  <header class="dashboard-header">
    <div class="header-content">
      <h1>ğŸ¢ CRM v3 Dashboard</h1>
      <div class="user-info">
        <span>Willkommen, {{ currentUser?.firstName }} {{ currentUser?.lastName }}</span>
        <button (click)="logout()" class="logout-button">
          ğŸšª Abmelden
        </button>
      </div>
    </div>
  </header>

  <main class="dashboard-main">
    <div class="welcome-card">
      <h2>Willkommen im CRM v3</h2>
      <div class="user-details">
        <div class="detail-item">
          <strong>Benutzername:</strong> {{ currentUser?.username || 'Unbekannt' }}
        </div>
        <div class="detail-item">
          <strong>E-Mail:</strong> {{ currentUser?.email || 'Unbekannt' }}
        </div>
        <div class="detail-item">
          <strong>Rolle:</strong> {{ getRoleDisplayName() }}
        </div>
        <div class="detail-item">
          <strong>Status:</strong> 
          <span class="status-badge" [class]="currentUser?.enabled ? 'status-active' : 'status-inactive'">
            {{ currentUser?.enabled ? 'Aktiv' : 'Inaktiv' }}
          </span>
        </div>
        <div class="detail-item" *ngIf="currentUser?.createdAt">
          <strong>Registriert:</strong> {{ formatDate(currentUser?.createdAt) }}
        </div>
        <div class="detail-item" *ngIf="currentUser?.lastLogin">
          <strong>Letzter Login:</strong> {{ formatDate(currentUser?.lastLogin) }}
        </div>
      </div>
    </div>

    <div class="quick-actions">
      <h3>ğŸš€ Schnellzugriff</h3>
      <div class="action-buttons">
        <button (click)="navigateToCustomers()" class="action-button primary">
          ğŸ‘¥ Kunden verwalten
        </button>
        <button (click)="navigateToOffers()" class="action-button secondary">
          ğŸ“„ Angebote
        </button>
        <button (click)="navigateToPipeline()" class="action-button secondary">
          ğŸ“ˆ Pipeline
        </button>
        <button *ngIf="isAdmin()" (click)="navigateToStatistics()" class="action-button admin">
          ğŸ“Š Statistiken
        </button>
      </div>
    </div>

    <div class="stats-overview" *ngIf="isAdmin()">
      <div class="stats-header">
        <h3>ğŸ“ˆ Ãœbersicht</h3>
        <button (click)="refreshStats()" class="refresh-button" title="Statistiken aktualisieren">
          ğŸ”„
        </button>
      </div>
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">ğŸ‘¥</div>
          <div class="stat-content">
            <div class="stat-value">{{ customerStats.total || 0 }}</div>
            <div class="stat-label">Gesamt Kunden</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ“ˆ</div>
          <div class="stat-content">
            <div class="stat-value">{{ customerStats.inPipeline || 0 }}</div>
            <div class="stat-label">In Pipeline</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">âœ…</div>
          <div class="stat-content">
            <div class="stat-value">{{ customerStats.won || 0 }}</div>
            <div class="stat-label">Gewonnen</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">âŒ</div>
          <div class="stat-content">
            <div class="stat-value">{{ customerStats.lost || 0 }}</div>
            <div class="stat-label">Verloren</div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div> 