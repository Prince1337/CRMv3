import{a as y}from"./chunk-R3BKSPTG.js";import{a as I,b as d,c as S,d as F,f as N,h as z,k as R,q as T,s as k}from"./chunk-ZT4TKUMT.js";import"./chunk-562UQ2XR.js";import{d as w,e as O,h as E}from"./chunk-BYEZXU77.js";import{$a as p,Ia as g,Jb as x,Ka as l,La as f,Na as a,Nb as P,Oa as i,Pa as u,Ta as M,Ua as c,W as C,Za as s,gb as b,va as n,wa as h}from"./chunk-ZEIBLRTY.js";import{c as _}from"./chunk-CWTPBX7D.js";function L(t,m){if(t&1&&(a(0,"div",25),s(1),i()),t&2){let e=c();n(),p(" ",e.getErrorMessage("firstName")," ")}}function V(t,m){if(t&1&&(a(0,"div",25),s(1),i()),t&2){let e=c();n(),p(" ",e.getErrorMessage("lastName")," ")}}function q(t,m){if(t&1&&(a(0,"div",25),s(1),i()),t&2){let e=c();n(),p(" ",e.getErrorMessage("username")," ")}}function B(t,m){if(t&1&&(a(0,"div",25),s(1),i()),t&2){let e=c();n(),p(" ",e.getErrorMessage("email")," ")}}function D(t,m){if(t&1&&(a(0,"div",25),s(1),i()),t&2){let e=c();n(),p(" ",e.getErrorMessage("password")," ")}}function A(t,m){if(t&1&&(a(0,"div",25),s(1),i()),t&2){let e=c();n(),p(" ",e.getErrorMessage("confirmPassword")," ")}}function G(t,m){if(t&1&&(a(0,"div",26),s(1),i()),t&2){let e=c();n(),p(" ",e.errorMessage," ")}}function j(t,m){if(t&1&&(a(0,"div",27),s(1),i()),t&2){let e=c();n(),p(" ",e.successMessage," ")}}function Z(t,m){t&1&&(a(0,"span"),s(1,"Registrieren"),i())}function K(t,m){t&1&&(a(0,"span"),s(1,"Registrierung l\xE4uft..."),i())}var ee=(()=>{class t{constructor(e,o,r){this.fb=e,this.authService=o,this.router=r,this.isLoading=!1,this.errorMessage="",this.successMessage="",this.registerForm=this.fb.group({username:["",[d.required,d.minLength(3)]],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],confirmPassword:["",[d.required]],firstName:["",[d.required]],lastName:["",[d.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(e){let o=e.get("password"),r=e.get("confirmPassword");return o&&r&&o.value!==r.value?(r.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):null}onSubmit(){if(this.registerForm.valid){this.isLoading=!0,this.errorMessage="",this.successMessage="";let e=this.registerForm.value,{confirmPassword:o}=e,r=_(e,["confirmPassword"]);this.authService.register(r).subscribe({next:v=>{this.successMessage=v.message,this.isLoading=!1,setTimeout(()=>{this.router.navigate(["/login"])},2e3)},error:v=>{this.errorMessage=v.message,this.isLoading=!1}})}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.registerForm.controls).forEach(e=>{this.registerForm.get(e)?.markAsTouched()})}getErrorMessage(e){let o=this.registerForm.get(e);return o?.hasError("required")?`${this.getFieldDisplayName(e)} ist erforderlich`:e==="username"&&o?.hasError("minlength")?"Benutzername muss mindestens 3 Zeichen lang sein":e==="password"&&o?.hasError("minlength")?"Passwort muss mindestens 6 Zeichen lang sein":e==="email"&&o?.hasError("email")?"Bitte geben Sie eine g\xFCltige E-Mail-Adresse ein":e==="confirmPassword"&&o?.hasError("passwordMismatch")?"Passw\xF6rter stimmen nicht \xFCberein":""}getFieldDisplayName(e){return{username:"Benutzername",email:"E-Mail",password:"Passwort",confirmPassword:"Passwort best\xE4tigen",firstName:"Vorname",lastName:"Nachname"}[e]||e}isFieldInvalid(e){let o=this.registerForm.get(e);return!!(o?.invalid&&o?.touched)}static{this.\u0275fac=function(o){return new(o||t)(h(T),h(y),h(w))}}static{this.\u0275cmp=C({type:t,selectors:[["app-register"]],standalone:!0,features:[b],decls:49,vars:24,consts:[[1,"register-container"],[1,"register-card"],[1,"register-header"],[1,"register-form",3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],["for","firstName"],["type","text","id","firstName","formControlName","firstName","placeholder","Vorname eingeben","autocomplete","given-name"],["class","error-message",4,"ngIf"],["for","lastName"],["type","text","id","lastName","formControlName","lastName","placeholder","Nachname eingeben","autocomplete","family-name"],["for","username"],["type","text","id","username","formControlName","username","placeholder","Benutzername eingeben","autocomplete","username"],["for","email"],["type","email","id","email","formControlName","email","placeholder","E-Mail-Adresse eingeben","autocomplete","email"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Passwort eingeben","autocomplete","new-password"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Passwort wiederholen","autocomplete","new-password"],["class","error-message global-error",4,"ngIf"],["class","success-message",4,"ngIf"],["type","submit",1,"register-button",3,"disabled"],[4,"ngIf"],[1,"register-footer"],["routerLink","/login"],[1,"error-message"],[1,"error-message","global-error"],[1,"success-message"]],template:function(o,r){o&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),s(4,"CRM v3"),i(),a(5,"p"),s(6,"Registrieren"),i()(),a(7,"form",3),M("ngSubmit",function(){return r.onSubmit()}),a(8,"div",4)(9,"div",5)(10,"label",6),s(11,"Vorname"),i(),u(12,"input",7),g(13,L,2,1,"div",8),i(),a(14,"div",5)(15,"label",9),s(16,"Nachname"),i(),u(17,"input",10),g(18,V,2,1,"div",8),i()(),a(19,"div",5)(20,"label",11),s(21,"Benutzername"),i(),u(22,"input",12),g(23,q,2,1,"div",8),i(),a(24,"div",5)(25,"label",13),s(26,"E-Mail"),i(),u(27,"input",14),g(28,B,2,1,"div",8),i(),a(29,"div",5)(30,"label",15),s(31,"Passwort"),i(),u(32,"input",16),g(33,D,2,1,"div",8),i(),a(34,"div",5)(35,"label",17),s(36,"Passwort best\xE4tigen"),i(),u(37,"input",18),g(38,A,2,1,"div",8),i(),g(39,G,2,1,"div",19)(40,j,2,1,"div",20),a(41,"button",21),g(42,Z,2,0,"span",22)(43,K,2,0,"span",22),i()(),a(44,"div",23)(45,"p"),s(46,"Bereits ein Konto? "),a(47,"a",24),s(48,"Anmelden"),i()()()()()),o&2&&(n(7),l("formGroup",r.registerForm),n(5),f("invalid",r.isFieldInvalid("firstName")),n(),l("ngIf",r.isFieldInvalid("firstName")),n(4),f("invalid",r.isFieldInvalid("lastName")),n(),l("ngIf",r.isFieldInvalid("lastName")),n(4),f("invalid",r.isFieldInvalid("username")),n(),l("ngIf",r.isFieldInvalid("username")),n(4),f("invalid",r.isFieldInvalid("email")),n(),l("ngIf",r.isFieldInvalid("email")),n(4),f("invalid",r.isFieldInvalid("password")),n(),l("ngIf",r.isFieldInvalid("password")),n(4),f("invalid",r.isFieldInvalid("confirmPassword")),n(),l("ngIf",r.isFieldInvalid("confirmPassword")),n(),l("ngIf",r.errorMessage),n(),l("ngIf",r.successMessage),n(),l("disabled",r.isLoading||r.registerForm.invalid),n(),l("ngIf",!r.isLoading),n(),l("ngIf",r.isLoading))},dependencies:[P,x,k,N,I,S,F,z,R,E,O],styles:[".register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,var(--apple-blue) 0%,var(--apple-purple) 100%);padding:var(--spacing-lg)}.register-card[_ngcontent-%COMP%]{background:#fff;border-radius:var(--radius-lg);box-shadow:var(--shadow-md);padding:var(--spacing-2xl);width:100%;max-width:500px}.register-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.register-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--apple-gray-11);margin:0 0 var(--spacing-sm) 0;font-size:var(--font-size-3xl);font-weight:600}.register-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--apple-gray-6);margin:0;font-size:var(--font-size-base)}.register-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-lg);margin-bottom:var(--spacing-lg)}.register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:var(--spacing-sm);color:var(--apple-gray-8);font-size:var(--font-size-sm);font-weight:500}.register-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-md);border:1px solid var(--apple-gray-3);border-radius:var(--radius-md);font-size:var(--font-size-base);font-family:var(--font-family);transition:all var(--transition-normal);background-color:#fff}.register-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--apple-blue);box-shadow:0 0 0 3px #007aff1a}.register-form[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-color:var(--apple-red);box-shadow:0 0 0 3px #ff3b301a}.register-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--apple-gray-5)}.register-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:var(--apple-red);font-size:var(--font-size-xs);margin-top:var(--spacing-xs);display:flex;align-items:center}.register-form[_ngcontent-%COMP%]   .error-message.global-error[_ngcontent-%COMP%]{background:#ff3b301a;border-color:#ff3b3033;color:var(--apple-red);padding:var(--spacing-md);border-radius:var(--radius-md);margin-bottom:var(--spacing-lg);font-size:var(--font-size-sm);border:1px solid}.register-form[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{background:#34c7591a;border-color:#34c75933;color:var(--apple-green);padding:var(--spacing-md);border-radius:var(--radius-md);margin-bottom:var(--spacing-lg);font-size:var(--font-size-sm);border:1px solid}.register-form[_ngcontent-%COMP%]   .register-button[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-md);background:linear-gradient(135deg,var(--apple-blue) 0%,var(--apple-purple) 100%);color:#fff;border:none;border-radius:var(--radius-md);font-size:var(--font-size-base);font-weight:600;cursor:pointer;transition:all var(--transition-normal)}.register-form[_ngcontent-%COMP%]   .register-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--shadow-lg)}.register-form[_ngcontent-%COMP%]   .register-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.register-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-lg);padding-top:var(--spacing-lg);border-top:1px solid var(--apple-gray-2)}.register-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--apple-gray-6);margin:0;font-size:var(--font-size-sm)}.register-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--apple-blue);text-decoration:none;font-weight:500}.register-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 600px){.register-container[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.register-card[_ngcontent-%COMP%]{padding:var(--spacing-xl) var(--spacing-lg)}.register-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--font-size-2xl)}.register-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:0}}"]})}}return t})();export{ee as RegisterComponent};
