import{a as w}from"./chunk-R3BKSPTG.js";import{a as y,b as f,c as E,d as S,f as z,h as F,k as I,q as L,s as N}from"./chunk-ZT4TKUMT.js";import"./chunk-562UQ2XR.js";import{d as x,e as O,h as P}from"./chunk-BYEZXU77.js";import{$a as c,Ia as g,Jb as b,Ka as l,La as u,Na as t,Nb as M,Oa as o,Pa as v,Ta as h,Ua as p,W as _,Za as a,gb as C,va as r,wa as m}from"./chunk-ZEIBLRTY.js";import"./chunk-CWTPBX7D.js";function k(n,d){if(n&1&&(t(0,"div",15),a(1),o()),n&2){let e=p();r(),c(" ",e.getErrorMessage("usernameOrEmail")," ")}}function T(n,d){if(n&1&&(t(0,"div",15),a(1),o()),n&2){let e=p();r(),c(" ",e.getErrorMessage("password")," ")}}function j(n,d){if(n&1&&(t(0,"div",16),a(1),o()),n&2){let e=p();r(),c(" ",e.errorMessage," ")}}function D(n,d){n&1&&(t(0,"span"),a(1,"Anmelden"),o())}function R(n,d){n&1&&(t(0,"span"),a(1,"Anmeldung l\xE4uft..."),o())}var Z=(()=>{class n{constructor(e,i,s){this.fb=e,this.authService=i,this.router=s,this.isLoading=!1,this.errorMessage="",this.loginForm=this.fb.group({usernameOrEmail:["admin",[f.required]],password:["Wj7Y5xfY7fWjmGF3dSuJVEvg8N+7qqc3",[f.required,f.minLength(6)]]})}onSubmit(){this.loginForm.valid&&(this.isLoading=!0,this.errorMessage="",this.authService.login(this.loginForm.value).subscribe({next:()=>{this.isLoading=!1,this.router.navigate(["/customers"])},error:e=>{this.errorMessage=e.message,this.isLoading=!1}}))}getErrorMessage(e){let i=this.loginForm.get(e);return i?.hasError("required")?`${this.getFieldDisplayName(e)} ist erforderlich`:e==="password"&&i?.hasError("minlength")?"Passwort muss mindestens 6 Zeichen lang sein":""}getFieldDisplayName(e){return{usernameOrEmail:"Benutzername oder E-Mail",password:"Passwort"}[e]||e}isFieldInvalid(e){let i=this.loginForm.get(e);return!!(i?.invalid&&i?.touched)}static{this.\u0275fac=function(i){return new(i||n)(m(L),m(w),m(x))}}static{this.\u0275cmp=_({type:n,selectors:[["app-login"]],standalone:!0,features:[C],decls:27,vars:10,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","usernameOrEmail"],["type","text","id","usernameOrEmail","formControlName","usernameOrEmail","placeholder","Benutzername oder E-Mail eingeben","autocomplete","username"],["class","error-message",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Passwort eingeben","autocomplete","current-password"],["class","error-message global-error",4,"ngIf"],["type","submit",1,"login-button"],[4,"ngIf"],[1,"login-footer"],["routerLink","/register"],[1,"error-message"],[1,"error-message","global-error"]],template:function(i,s){i&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),a(4,"CRM v3"),o(),t(5,"p"),a(6,"Anmelden"),o()(),t(7,"form",3),h("ngSubmit",function(){return s.onSubmit()}),t(8,"div",4)(9,"label",5),a(10,"Benutzername oder E-Mail"),o(),v(11,"input",6),g(12,k,2,1,"div",7),o(),t(13,"div",4)(14,"label",8),a(15,"Passwort"),o(),v(16,"input",9),g(17,T,2,1,"div",7),o(),g(18,j,2,1,"div",10),t(19,"button",11),g(20,D,2,0,"span",12)(21,R,2,0,"span",12),o()(),t(22,"div",13)(23,"p"),a(24,"Noch kein Konto? "),t(25,"a",14),a(26,"Registrieren"),o()()()()()),i&2&&(r(7),l("formGroup",s.loginForm),r(4),u("invalid",s.isFieldInvalid("usernameOrEmail")),r(),l("ngIf",s.isFieldInvalid("usernameOrEmail")),r(4),u("invalid",s.isFieldInvalid("password")),r(),l("ngIf",s.isFieldInvalid("password")),r(),l("ngIf",s.errorMessage),r(2),l("ngIf",!s.isLoading),r(),l("ngIf",s.isLoading))},dependencies:[M,b,N,z,y,E,S,F,I,P,O],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,var(--apple-blue) 0%,var(--apple-purple) 100%);padding:var(--spacing-lg)}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:var(--radius-lg);box-shadow:var(--shadow-md);padding:var(--spacing-2xl);width:100%;max-width:400px}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--apple-gray-11);margin:0 0 var(--spacing-sm) 0;font-size:var(--font-size-3xl);font-weight:600}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--apple-gray-6);margin:0;font-size:var(--font-size-base)}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:var(--spacing-sm);color:var(--apple-gray-8);font-size:var(--font-size-sm);font-weight:500}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-md);border:1px solid var(--apple-gray-3);border-radius:var(--radius-md);font-size:var(--font-size-base);font-family:var(--font-family);transition:all var(--transition-normal);background-color:#fff}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--apple-blue);box-shadow:0 0 0 3px #007aff1a}.login-form[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-color:var(--apple-red);box-shadow:0 0 0 3px #ff3b301a}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--apple-gray-5)}.login-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:var(--apple-red);font-size:var(--font-size-xs);margin-top:var(--spacing-xs);display:flex;align-items:center}.login-form[_ngcontent-%COMP%]   .error-message.global-error[_ngcontent-%COMP%]{background:#ff3b301a;border-color:#ff3b3033;color:var(--apple-red);padding:var(--spacing-md);border-radius:var(--radius-md);margin-bottom:var(--spacing-lg);font-size:var(--font-size-sm);border:1px solid}.login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-md);background:linear-gradient(135deg,var(--apple-blue) 0%,var(--apple-purple) 100%);color:#fff;border:none;border-radius:var(--radius-md);font-size:var(--font-size-base);font-weight:600;cursor:pointer;transition:all var(--transition-normal)}.login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--shadow-lg)}.login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.login-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-lg);padding-top:var(--spacing-lg);border-top:1px solid var(--apple-gray-2)}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--apple-gray-6);margin:0;font-size:var(--font-size-sm)}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--apple-blue);text-decoration:none;font-weight:500}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:var(--spacing-sm)}.login-card[_ngcontent-%COMP%]{padding:var(--spacing-xl) var(--spacing-lg)}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--font-size-2xl)}}"]})}}return n})();export{Z as LoginComponent};
